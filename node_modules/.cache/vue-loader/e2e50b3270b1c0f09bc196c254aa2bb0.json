{"remainingRequest":"/Users/Ali/Desktop/medical-test/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/Ali/Desktop/medical-test/src/components/containers/admin/questions/questions.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/Ali/Desktop/medical-test/src/components/containers/admin/questions/questions.vue","mtime":1627368454000},{"path":"/Users/Ali/Desktop/medical-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Ali/Desktop/medical-test/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/Ali/Desktop/medical-test/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Ali/Desktop/medical-test/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBmaXJlc3RvcmUgZnJvbSAnLi4vLi4vLi4vLi4vLi4vZmlyZWJhc2UnCmltcG9ydCBDbGFzc2ljRWRpdG9yIGZyb20gJ0Bja2VkaXRvci9ja2VkaXRvcjUtYnVpbGQtY2xhc3NpYycKaW1wb3J0IE9wdGlvbnMgZnJvbSAnLi9jb21wb25lbnRzL2NoZWNrYm94L2NoZWNrYm94JwppbXBvcnQgQ2lyY2xlOCBmcm9tICd2dWUtbG9hZGluZy1zcGlubmVyL3NyYy9jb21wb25lbnRzL0NpcmNsZTgnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGVkaXRvcjogQ2xhc3NpY0VkaXRvciwKICAgICAgICAgICAgZWRpdG9yQ29uZmlnOiB7fSwKICAgICAgICAgICAgcXVlc3Rpb25zQXJyYXk6IFtdLAogICAgICAgICAgICBxdWVzdGlvbjoge30sCiAgICAgICAgICAgIGN1cnJlbnRMb2NhdGlvbjogMCwKICAgICAgICAgICAgb3B0aW9uczogWyJDb250ZXh0IiwgIkNob2ljZXMiLCAiR3JhbW1lciJdLAogICAgICAgICAgICBzZWxlY3RlZE9wdGlvbnM6IFtdLAogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICAgICAgZWw6IG51bGwKICAgICAgICB9CiAgICB9LAogICAgYXN5bmMgY3JlYXRlZCgpIHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25zRG9jID0gYXdhaXQgZmlyZXN0b3JlLmRiLmNvbGxlY3Rpb24oIm1vZGlmaWVkUXVlc3Rpb25zIikuZ2V0KCkKICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25zQXJyYXkgPSBbXQogICAgICAgICAgICBxdWVzdGlvbnNEb2MuZm9yRWFjaChzbmFwc2hvdCA9PiB7CiAgICAgICAgICAgICAgICBxdWVzdGlvbnNBcnJheS5wdXNoKHsuLi5zbmFwc2hvdC5kYXRhKCksIGtleTogc25hcHNob3QuaWR9KQogICAgICAgICAgICB9KQogICAgICAgICAgICB0aGlzLnF1ZXN0aW9uc0FycmF5ID0gcXVlc3Rpb25zQXJyYXkubWFwKChxLCBpbmRleCkgPT4gKHsuLi5xLCBudW1iZXI6IGluZGV4ICsgMX0pKQogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCkKICAgICAgICB9Y2F0Y2goZXJyKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgICAgICAgdGhpcy4kc3dhbC5maXJlKAogICAgICAgICAgICAgICAgJ0Vycm9yIE9jY3VyZWQnLAogICAgICAgICAgICAgICAgJ0ZhaWxlZCB0byBmZXRjaCBxdWVzdGlvbnMhJywKICAgICAgICAgICAgICAgICdlcnJvcicKICAgICAgICAgICAgKTsgCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgfQogICAgICAgIAogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBPcHRpb25zLAogICAgICAgIENpcmNsZTgKICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgc2VsZWN0T3B0aW9uKG9wdGlvbnMpIHsKICAgICAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSBvcHRpb25zCiAgICAgICAgfSwKICAgICAgICBlZGl0KGV2ZW50LCBrZXkpIHsKICAgICAgICAgICAgaWYodGhpcy5pc0VkaXRpbmcpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwoewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQXJlIHlvdSBzdXJlPycsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1lvdXIgY2hhbmdlcyB3aWxsIGJlIGRpc2NhcnRlZCcsCiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMsIGRpc2NhcnQnLAogICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdObywga2VlcCBjaGFuZ2VzJwogICAgICAgICAgICAgICAgfSkudGhlbigoe3ZhbHVlfSkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmKHZhbHVlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHJvY2VlZFdpdGhFZGl0KGV2ZW50LCBrZXkpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkgICAgCiAgICAgICAgICAgIH1lbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMucHJvY2VlZFdpdGhFZGl0KGV2ZW50LCBrZXkpCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHN1c3BlbmQoa2V5KSB7CiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgICAgY29uc3QgcXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9ucy5maW5kKHEgPT4gcS5rZXkgPT0ga2V5KQogICAgICAgICAgICBsZXQgY2hhbmdlVG8gPSB0cnVlCiAgICAgICAgICAgIGlmKHF1ZXN0aW9uLmFjdGl2ZSkgewogICAgICAgICAgICAgICAgY2hhbmdlVG8gPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZpcmVzdG9yZS5kYi5jb2xsZWN0aW9uKCJtb2RpZmllZFF1ZXN0aW9ucyIpLmRvYyhrZXkpLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICBhY3RpdmU6IGNoYW5nZVRvCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zQXJyYXkgPSB0aGlzLnF1ZXN0aW9uc0FycmF5Lm1hcChxID0+IHsKICAgICAgICAgICAgICAgICAgICBpZihxLmtleSA9PSBrZXkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcS5hY3RpdmUgPSBjaGFuZ2VUbwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gcQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24uYWN0aXZlID0gY2hhbmdlVG8KICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgCiAgICAgICAgICAgICAgICB0aGlzLiRzd2FsLmZpcmUoCiAgICAgICAgICAgICAgICAgICAgJ0Vycm9yIE9jY3VyZWQnLAogICAgICAgICAgICAgICAgICAgICdTb21ldGhpbmcgd2VudCB3cm9uZyEnLAogICAgICAgICAgICAgICAgICAgICdlcnJvcicKICAgICAgICAgICAgICAgICk7IAogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGFzeW5jIGRlbGV0ZVF1ZXN0aW9uKGtleSkgewogICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgICAgICAgIGZpcmVzdG9yZS5kYi5jb2xsZWN0aW9uKCJtb2RpZmllZFF1ZXN0aW9ucyIpLmRvYyhrZXkpLmRlbGV0ZSgpCiAgICAgICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgICAgIGlmKHRoaXMucXVlc3Rpb24ua2V5ID09IGtleSkgewogICAgICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb24gPSB7fQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNBcnJheSA9IHRoaXMucXVlc3Rpb25zLmZpbHRlcihxID0+IHEua2V5ICE9PSBrZXkpCiAgICAgICAgICAgICAgICB0aGlzLnJldHVybkJhY2soKQogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7IAogICAgICAgICAgICAgICAgdGhpcy4kc3dhbC5maXJlKAogICAgICAgICAgICAgICAgICAgICdFcnJvciBPY2N1cmVkJywKICAgICAgICAgICAgICAgICAgICAnU29tZXRoaW5nIHdlbnQgd3JvbmchJywKICAgICAgICAgICAgICAgICAgICAnZXJyb3InCiAgICAgICAgICAgICAgICApOyAKICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBhc3luYyBlZGl0UXVlc3Rpb24oa2V5SWQpIHsKICAgICAgICAgICAgLy8gY29uc3QgcXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9ucy5maW5kKHEgPT4gcS5rZXkgPT0ga2V5SWQpCiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgICAgICAgZmlyZXN0b3JlLmRiLmNvbGxlY3Rpb24oIm1vZGlmaWVkUXVlc3Rpb25zIikuZG9jKGtleUlkKS51cGRhdGUoewogICAgICAgICAgICAgICAgcXVlc3Rpb246IHRoaXMucXVlc3Rpb24ucXVlc3Rpb24sCiAgICAgICAgICAgICAgICBjaG9pY2VzOiB0aGlzLnF1ZXN0aW9uLmNob2ljZXMsCiAgICAgICAgICAgICAgICBjaG9pY2VzTW9kaWZpZWQ6IHRoaXMuaXNNb2RpZmllZCgiY2hvaWNlcyIpLAogICAgICAgICAgICAgICAgZ3JhbW1lck1vZGlmaWVkOiB0aGlzLmlzTW9kaWZpZWQoImdyYW1tZXIiKSwKICAgICAgICAgICAgICAgIGNvbnRleHRNb2RpZmllZDogdGhpcy5pc01vZGlmaWVkKCJjb250ZXh0IikKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgY29uc3QgcXVlc3Rpb25JbmRleCA9IHRoaXMucXVlc3Rpb25zLmZpbmRJbmRleChxID0+IHEua2V5ID09IGtleUlkKQogICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNBcnJheVtxdWVzdGlvbkluZGV4XS5xdWVzdGlvbiA9IHRoaXMucXVlc3Rpb24ucXVlc3Rpb24KICAgICAgICAgICAgICAgIHRoaXMucXVlc3Rpb25zQXJyYXlbcXVlc3Rpb25JbmRleF0uY2hvaWNlcyA9IHRoaXMucXVlc3Rpb24uY2hvaWNlcwogICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNBcnJheVtxdWVzdGlvbkluZGV4XS5jaG9pY2VzTW9kaWZpZWQgPSB0aGlzLmlzTW9kaWZpZWQoImNob2ljZXMiKQogICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNBcnJheVtxdWVzdGlvbkluZGV4XS5jb250ZXh0TW9kaWZpZWQgPSB0aGlzLmlzTW9kaWZpZWQoImNvbnRleHQiKQogICAgICAgICAgICAgICAgdGhpcy5xdWVzdGlvbnNBcnJheVtxdWVzdGlvbkluZGV4XS5ncmFtbWVyTW9kaWZpZWQgPSB0aGlzLmlzTW9kaWZpZWQoImdyYW1tZXIiKQogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOyAKICAgICAgICAgICAgICAgIHRoaXMuJHN3YWwuZmlyZSgKICAgICAgICAgICAgICAgICAgICAnRXJyb3IgT2NjdXJlZCcsCiAgICAgICAgICAgICAgICAgICAgJ1NvbWV0aGluZyB3ZW50IHdyb25nIScsCiAgICAgICAgICAgICAgICAgICAgJ2Vycm9yJwogICAgICAgICAgICAgICAgKTsgCiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAgICAgICB9KQoKICAgICAgICB9LAogICAgICAgIGlzTW9kaWZpZWQodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWRPcHRpb25zLmZpbHRlcihvcCA9PiBvcC52YWx1ZS50b0xvd2VyQ2FzZSgpID09IHZhbHVlLnRvTG93ZXJDYXNlKCkgJiYgb3Auc3RhdGUpLmxlbmd0aCA+IDAKICAgICAgICB9LAogICAgICAgIHRvZ2dsZUVkaXRpbmcoKSB7CiAgICAgICAgICAgIHRoaXMuaXNFZGl0aW5nID0gdHJ1ZQogICAgICAgIH0sCiAgICAgICAgcHJvY2VlZFdpdGhFZGl0KGV2ZW50LCBrZXkpIHsKICAgICAgICAgICAgdGhpcy5xdWVzdGlvbiA9IHRoaXMucXVlc3Rpb25zLmZpbmQocSA9PiBxLmtleSA9PSBrZXkpCiAgICAgICAgICAgIHRoaXMuZWwgPSBldmVudC50YXJnZXQKICAgICAgICAgICAgdGhpcy5zY3JvbGxUb1RvcCgpCiAgICAgICAgfSwKICAgICAgICBzY3JvbGxUb1RvcCgpIHsKICAgICAgICAgICAgd2luZG93LnNjcm9sbCh7CiAgICAgICAgICAgICAgICB0b3A6IDAsCiAgICAgICAgICAgICAgICBsZWZ0OiAwLAogICAgICAgICAgICAgICAgYmVoYXZpb3I6ICdzbW9vdGgnCiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICByZXR1cm5CYWNrKCkgewogICAgICAgICAgICB0aGlzLmVsLnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogImNlbnRlciIgfSkKICAgICAgICB9LAogICAgICAgIGlzQWN0aXZlKGtleSkgewogICAgICAgICAgICByZXR1cm4ga2V5ID09IHRoaXMucXVlc3Rpb24ua2V5CiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOiB7CiAgICAgICAgcXVlc3Rpb25zKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVzdGlvbnNBcnJheQogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"sources":["questions.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"questions.vue","sourceRoot":"src/components/containers/admin/questions","sourcesContent":["<template>\n    <div class=\"questions__main\">\n      <h1 class=\"title\">Questions Admin Dashboard</h1>\n      <div v-if=\"loading\" class=\"spinner-container\">\n          <Circle8/>\n      </div>\n      <div class=\"question__update\">\n            <div class=\"update\" v-if=\"question.key\">\n                <div class=\"question__heading\">\n                    <span class=\"question__id--update\"><strong>ID: </strong>{{question.id}}</span>\n                    <span class=\"question__id--number\"><strong>Question: </strong>{{question.number}}</span>\n                </div>\n                <ckeditor :editor=\"editor\" v-model=\"question.question\" :config=\"editorConfig\"></ckeditor>\n                <div v-for=\"choice in question.choices\" :key=\"choice.id\" :class=\"{'editor--green-borders': choice.isCorrect}\">\n                    <ckeditor v-model=\"choice.text\" :editor=\"editor\" :config=\"editorConfig\"></ckeditor>\n                </div>\n                <div v-if=\"question.key\"><Options :optionsProps=\"options\" @optionSelected=\"selectOption\"/></div>\n                <div class=\"status\" v-if=\"question.key\">\n                    <p class=\"status__items\">Grammer: {{question.grammerModified ? \"Yes\" : \"No\"}}</p>\n                    <p class=\"status__items\">Context: {{question.contextModified ? \"Yes\" : \"No\"}}</p>\n                    <p class=\"status__items\">Choices: {{question.choicesModified ? \"Yes\" : \"No\"}}</p>\n                </div>\n                <div class=\"update__actions\" v-if=\"question.key\">\n                    <button class=\"actions__action\" @click=\"editQuestion(question.key)\">Save</button>\n                    <button class=\"actions__action actions--yellow\" @click=\"suspend(question.key)\">{{question.active ? 'Suspend' : 'Unsuspend'}}</button>\n                    <button class=\"actions__action actions--red\" @click=\"deleteQuestion(question.key)\">Delete</button>\n                    <button class=\"actions__action actions--orange\" @click=\"returnBack()\">Return</button>\n                </div>\n            </div>\n      </div>\n      <div class=\"warning__container\" v-if=\"!questions.length && !loading\">\n          <h1 class=\"warning__text\">No question to display</h1>\n      </div>\n      <div class=\"questions\" v-if=\"questions\">\n            <div v-for=\"question in questions\" :key=\"question.id\" class=\"question\" :class=\"{'question--active': isActive(question.key)}\">\n                <div class=\"question__heading\">\n                    <span class=\"question__id\"><strong>ID: </strong>{{question.id}}</span>\n                    <span class=\"question__number\"><strong>Question: </strong>{{question.number}}</span>\n                </div>\n                <p class=\"question__question\" v-html=\"question.question\"></p>\n                <div class=\"status status--nopadding\">\n                    <p class=\"status__items\">Grammer: {{question.grammerModified ? \"Yes\" : \"No\"}}</p>\n                    <p class=\"status__items\">Context: {{question.contextModified ? \"Yes\" : \"No\"}}</p>\n                    <p class=\"status__items\">Choices: {{question.choicesModified ? \"Yes\" : \"No\"}}</p>\n                </div>\n                <div class=\"question__actions\">\n                    <button class=\"actions__action\" @click=\"edit($event, question.key)\">Edit</button>\n                    <button class=\"actions__action actions--yellow\" @click=\"suspend(question.key)\">{{question.active ? 'Suspend' : 'Unsuspend'}}</button>\n                    <button class=\"actions__action actions--red\" @click=\"deleteQuestion(question.key)\">Delete</button>\n                </div>\n            </div>\n      </div>\n    </div>\n</template>\n\n<script>\nimport firestore from '../../../../../firebase'\nimport ClassicEditor from '@ckeditor/ckeditor5-build-classic'\nimport Options from './components/checkbox/checkbox'\nimport Circle8 from 'vue-loading-spinner/src/components/Circle8'\n\nexport default {\n    data() {\n        return {\n            editor: ClassicEditor,\n            editorConfig: {},\n            questionsArray: [],\n            question: {},\n            currentLocation: 0,\n            options: [\"Context\", \"Choices\", \"Grammer\"],\n            selectedOptions: [],\n            loading: false,\n            el: null\n        }\n    },\n    async created() {\n        this.loading = true\n        try {\n            const questionsDoc = await firestore.db.collection(\"modifiedQuestions\").get()\n            const questionsArray = []\n            questionsDoc.forEach(snapshot => {\n                questionsArray.push({...snapshot.data(), key: snapshot.id})\n            })\n            this.questionsArray = questionsArray.map((q, index) => ({...q, number: index + 1}))\n            this.loading = false\n            return Promise.resolve()\n        }catch(err) {\n            console.log(err)\n            this.$swal.fire(\n                'Error Occured',\n                'Failed to fetch questions!',\n                'error'\n            ); \n            this.loading = false\n        }\n        \n    },\n    components: {\n        Options,\n        Circle8\n    },\n    methods: {\n        selectOption(options) {\n            this.selectedOptions = options\n        },\n        edit(event, key) {\n            if(this.isEditing) {\n                this.$swal({\n                    title: 'Are you sure?',\n                    text: 'Your changes will be discarted',\n                    icon: 'warning',\n                    showCancelButton: true,\n                    confirmButtonText: 'Yes, discart',\n                    cancelButtonText: 'No, keep changes'\n                }).then(({value}) => {\n                    if(value) {\n                        this.proceedWithEdit(event, key)\n                    }\n                })    \n            }else {\n                this.proceedWithEdit(event, key)\n            }\n        },\n        suspend(key) {\n            this.loading = true\n            const question = this.questions.find(q => q.key == key)\n            let changeTo = true\n            if(question.active) {\n                changeTo = false\n            }\n            firestore.db.collection(\"modifiedQuestions\").doc(key).update({\n                active: changeTo\n            })\n            .then(() => {\n                this.questionsArray = this.questionsArray.map(q => {\n                    if(q.key == key) {\n                        q.active = changeTo\n                    }\n                    return q\n                })\n                this.question.active = changeTo\n                this.loading = false\n            })\n            .catch(err => {\n                console.log(err); \n                this.$swal.fire(\n                    'Error Occured',\n                    'Something went wrong!',\n                    'error'\n                ); \n                this.loading = false\n            })\n        },\n        async deleteQuestion(key) {\n            this.loading = true\n            firestore.db.collection(\"modifiedQuestions\").doc(key).delete()\n            .then(() => {\n                if(this.question.key == key) {\n                    this.question = {}\n                }\n                this.questionsArray = this.questions.filter(q => q.key !== key)\n                this.returnBack()\n                this.loading = false\n            }).catch(err => {\n                console.log(err); \n                this.$swal.fire(\n                    'Error Occured',\n                    'Something went wrong!',\n                    'error'\n                ); \n                this.loading = false\n            })\n        },\n        async editQuestion(keyId) {\n            // const question = this.questions.find(q => q.key == keyId)\n            this.loading = true\n            firestore.db.collection(\"modifiedQuestions\").doc(keyId).update({\n                question: this.question.question,\n                choices: this.question.choices,\n                choicesModified: this.isModified(\"choices\"),\n                grammerModified: this.isModified(\"grammer\"),\n                contextModified: this.isModified(\"context\")\n            })\n            .then(() => {\n                const questionIndex = this.questions.findIndex(q => q.key == keyId)\n                this.questionsArray[questionIndex].question = this.question.question\n                this.questionsArray[questionIndex].choices = this.question.choices\n                this.questionsArray[questionIndex].choicesModified = this.isModified(\"choices\")\n                this.questionsArray[questionIndex].contextModified = this.isModified(\"context\")\n                this.questionsArray[questionIndex].grammerModified = this.isModified(\"grammer\")\n                this.loading = false\n            })\n            .catch(err => {\n                console.log(err); \n                this.$swal.fire(\n                    'Error Occured',\n                    'Something went wrong!',\n                    'error'\n                ); \n                this.loading = false\n            })\n\n        },\n        isModified(value) {\n            return this.selectedOptions.filter(op => op.value.toLowerCase() == value.toLowerCase() && op.state).length > 0\n        },\n        toggleEditing() {\n            this.isEditing = true\n        },\n        proceedWithEdit(event, key) {\n            this.question = this.questions.find(q => q.key == key)\n            this.el = event.target\n            this.scrollToTop()\n        },\n        scrollToTop() {\n            window.scroll({\n                top: 0,\n                left: 0,\n                behavior: 'smooth'\n            })\n        },\n        returnBack() {\n            this.el.scrollIntoView({ behavior: 'smooth', block: \"center\" })\n        },\n        isActive(key) {\n            return key == this.question.key\n        }\n    },\n    computed: {\n        questions() {\n            return this.questionsArray\n        }\n    }\n}\n</script>\n\n<style scoped lang=\"scss\">\n\n\n.questions__main {\n    font-family: sans-serif;\n}\n\n.title {\n    width: 100%;\n    padding: 12px;\n    text-align: center;\n}\n\n.questions {\n    padding: 12px;\n    font-family: sans-serif;\n}\n\n.question {\n    padding: 20px;\n    width: 80%;\n    margin-top: 10px;\n    margin-left: auto;\n    margin-right: auto;\n    border-radius: 5px;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n}\n\n.question__id--update {\n    padding: 12px;\n    display: block;\n}\n\n.question--active {\n    background: #eab75a;\n}\n\n\n.actions__action {\n  position: relative;\n  overflow: hidden;\n  padding: 10px 20px;\n  border-radius: 5px;\n  margin-right: 10px;\n  background: #70bf70;\n  border: 1px solid #70bf70;\n  color: white;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n  outline: none;\n  &:hover {\n    cursor: pointer;\n    transition: 0.3s;\n    background: white;\n    color: #70bf70;\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);\n  }\n  &:active {\n    outline: none;\n  }\n}\n\n\n.actions__action:after {\n  content: \"\";\n  background: #f1f1f1;\n  display: block;\n  position: absolute;\n  padding-top: 300%;\n  padding-left: 350%;\n  margin-left: -20px !important;\n  margin-top: -120%;\n  opacity: 0;\n  transition: all 0.8s\n}\n\n.actions__action:active:after {\n  padding: 0;\n  margin: 0;\n  opacity: 1;\n  transition: 0s\n}\n\n\n.actions--red {\n  background: #f36c6c;\n  border: 1px solid #f36c6c;\n  &:hover {\n    color: #f36c6c;\n  }\n}\n\n\n.actions--yellow {\n  background: #c5c56d;\n  border: 1px solid #c5c56d;\n  &:hover {\n    color: #c5c56d;\n  }\n}\n\n.update {\n    font-family: sans-serif;\n    padding: 12px;\n    width: 95%;\n    border-radius: 5px;\n    margin: auto;\n    margin-bottom: 7%;\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);\n}\n\n.update__actions {\n    padding: 12px;\n}\n\n\n.actions__action {\n  position: relative;\n  overflow: hidden;\n  padding: 10px 20px;\n  border-radius: 5px;\n  margin-right: 10px;\n  background: #70bf70;\n  border: 1px solid #70bf70;\n  color: white;\n  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);\n  outline: none;\n  &:hover {\n    cursor: pointer;\n    transition: 0.3s;\n    background: white;\n    color: #70bf70;\n    box-shadow: 0 12px 16px 0 rgba(0,0,0,0.24), 0 17px 50px 0 rgba(0,0,0,0.19);\n  }\n  &:active {\n    outline: none;\n  }\n}\n\n\n.actions__action:after {\n  content: \"\";\n  background: #f1f1f1;\n  display: block;\n  position: absolute;\n  padding-top: 300%;\n  padding-left: 350%;\n  margin-left: -20px !important;\n  margin-top: -120%;\n  opacity: 0;\n  transition: all 0.8s\n}\n\n.actions__action:active:after {\n  padding: 0;\n  margin: 0;\n  opacity: 1;\n  transition: 0s\n}\n\n\n.actions--red {\n  background: #f36c6c;\n  border: 1px solid #f36c6c;\n  &:hover {\n    color: #f36c6c;\n  }\n}\n\n\n.actions--yellow {\n  background: #c5c56d;\n  border: 1px solid #c5c56d;\n  &:hover {\n    color: #c5c56d;\n  }\n}\n\n.actions--orange {\n    background: #eab516;\n    border: 1px solid #eab516;\n    &:hover {\n        color: #eab516;\n    }\n}\n\n.status  {\n    padding: 0 12px;\n    display: flex;\n}\n\n.status--nopadding {\n    padding: 0;\n}\n\n.status__items {\n    margin-right: 12px;\n}\n\n.spinner-container {\n    position: fixed;\n    z-index: 10;\n    left: 0;\n    right: 0;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    top: 0;\n    bottom: 0;\n    align-items: center;\n    background: #7575759e;\n}\n\n.editor--green-borders {\n    border: 4px solid #56f156;\n}\n\n\n.question__heading {\n    display: flex;\n    justify-content: space-between;\n}\n\n.warning__container {\n    height: 90vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.warning__text {\n    font-size: 18px;\n}\n\n</style>"]}]}